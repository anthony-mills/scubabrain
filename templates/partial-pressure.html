<ion-view title="Partial Pressure Calculator" cache-view="false">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon" ng-hide="$exposeAside.active"></button>
  </ion-nav-buttons>
  <ion-content class="has-header bodyElement paneBackground" padding="true">
    <div class="card">
      <div class="item item-divider bar bar-header bar-assertive headingText">
          Partial pressure Calculator
      </div>

      <div class="item item-text-wrap">
        <div ng-if="showForm == 1">
          <div class="list formContainer">            
              <div ng-if="depthUnit == 'metric'">
                <div class="formLabel">
                    Depth ( metres )
                </div> 
                
                <input type="number" ng-model="nitroxInput.depth" min="1" step="1" max="100" ng-init="nitroxInput.depth = 30"/>
              </div>

              <div ng-if="depthUnit == 'imperial'">
                <div class="formLabel">
                    Depth ( feet )
                </div>                

                <input type="number" ng-model="nitroxInput.depth" min="1" step="1" max="300" ng-init="nitroxInput.depth = 90"/>
              </div>
          </div>

          <div class="list formContainer">
            <label>
              <div class="formLabel">
                Gas %
              </div>

              <select ng-model="nitroxInput.mix" class="formInput" ng-init="nitroxInput.mix = 0.21">
                <option value="0.21">21% ( Air )</option>
                <option value="0.22">22%</option>              
                <option value="0.23">23%</option>
                <option value="0.24">24%</option>
                <option value="0.25">25%</option>
                <option value="0.26">26%</option>
                <option value="0.27">27%</option>
                <option value="0.28">28%</option> 
                <option value="0.29">29%</option>
                <option value="0.30">30%</option>              
                <option value="0.31">31%</option>
                <option value="0.32">32%</option>
                <option value="0.33">33%</option>
                <option value="0.34">34%</option>
                <option value="0.35">35%</option>
                <option value="0.36">36%</option> 
                <option value="0.37">37%</option>
                <option value="0.38">38%</option>              
                <option value="0.39">39%</option>
                <option value="0.40">40%</option>
                <option value="0.41">41%</option>
                <option value="0.42">42%</option>
                <option value="0.43">43%</option>
                <option value="0.44">44%</option> 
                <option value="0.45">45%</option>
                <option value="0.46">46%</option>              
                <option value="0.47">47%</option>
                <option value="0.48">48%</option>
                <option value="0.49">49%</option>
                <option value="0.50">50%</option>
                <option value="0.51">51%</option>
                <option value="0.52">52%</option> 
                <option value="0.53">53%</option>
                <option value="0.54">54%</option>              
                <option value="0.55">55%</option>
                <option value="0.56">56%</option>
                <option value="0.57">57%</option>
                <option value="0.58">58%</option>
                <option value="0.59">59%</option>
                <option value="0.60">60%</option> 
                <option value="0.61">61%</option>
                <option value="0.62">62%</option>              
                <option value="0.63">63%</option>
                <option value="0.64">64%</option>
                <option value="0.65">65%</option>
                <option value="0.66">66%</option>
                <option value="0.67">67%</option>
                <option value="0.68">68%</option> 
                <option value="0.69">69%</option>
                <option value="0.70">70%</option>              
                <option value="0.71">71%</option>
                <option value="0.72">72%</option>
                <option value="0.73">73%</option>
                <option value="0.74">74%</option>
                <option value="0.75">75%</option>
                <option value="0.76">76%</option> 
                <option value="0.77">77%</option>
                <option value="0.78">78%</option>              
                <option value="0.79">79%</option>
                <option value="0.80">80%</option>
                <option value="0.81">81%</option>
                <option value="0.82">82%</option>
                <option value="0.83">83%</option>
                <option value="0.84">84%</option>  
                <option value="0.85">85%</option>
                <option value="0.86">86%</option>
                <option value="0.87">87%</option>
                <option value="0.88">88%</option>
                <option value="0.89">89%</option>
                <option value="0.90">90%</option> 
                <option value="0.91">91%</option>
                <option value="0.92">92%</option>              
                <option value="0.93">93%</option>
                <option value="0.94">94%</option>
                <option value="0.95">95%</option>
                <option value="0.96">96%</option>
                <option value="0.97">97%</option>
                <option value="0.98">98%</option> 
                <option value="0.99">99%</option>
                <option value="0.100">100%</option>                                                                                  
              </select>
            </label>

          </div>  

          <button ng-click="partialPressure(nitroxInput)" class="button button-block button-energized ion-calculator">
              Calculate Partial Pressure
          </button> 
        </div>      

        <div ng-if="showForm == 0">
            <div class="row">
                <div class="col">Depth:</div>
                <div class="col">{{::partialPressure.depth}}{{::partialPressure.unit}}</div>
            </div>

            <br />

            <div class="row">
                <div class="col">Partial Pressure ( PO2 ):</div>
                <div class="col">{{::partialPressure.pressure.o2pp}} ata</div>
            </div>   

            <br />

            <div class="row">
                <div class="col">Partial Pressure ( PN2 ):</div>
                <div class="col">{{::partialPressure.pressure.n2pp}} ata</div>
            </div> 

            <br />               

            <div class="row">
                <div class="col">Oxygen Content:</div>
                <div class="col">{{::partialPressure.mix}}%</div>
            </div>  

            <br />               

            <div class="row">
                <div class="col">Equivalent Air Depth:</div>
                <div class="col">{{::partialPressure.ead}} {{::partialPressure.unit}} ( EAD )</div>
            </div> 

            <br /> 

            <div class="tableContainer">
              <img src="img/diver_west.png"/>
            </div>        

            <br />

            <div ng-if="partialPressure.pressure.unsafe">
                <p class="errorText"><strong>WARNING:</strong> The Oxygen partial pressure exceeds 1.6 ata. Do not attempt to make a dive to {{::partialPressure.depth}}{{::partialPressure.unit}} breathing {{::partialPressure.mix}}% oxygen.</p>
            </div>

          <button ng-click="resetForm()" class="button button-block button-energized ion-calculator">
              Calculate Another Mix / Depth
          </button>           
        </div>               
    </div>
  </ion-content>
</ion-view>
